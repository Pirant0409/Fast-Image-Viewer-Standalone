<Controls:MetroWindow
    x:Class="FIVStandard.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:FIVStandard"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:utils="clr-namespace:FIVStandard.Utils"
    x:Name="MainFIV"
    Title="FIV"
    Width="800"
    Height="600"
    MinWidth="600"
    MinHeight="480"
    FontSize="16"
    Icon="Resources/FIVIcon.ico"
    IsTabStop="False"
    KeyDown="OnKeyDown"
    Loaded="OnAppLoaded"
    MouseDown="OnMouseDown"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d"
    >

    <!--  Window Bar Buttons  -->
    <Controls:MetroWindow.RightWindowCommands>
        <Controls:WindowCommands Focusable="False" IsTabStop="False">
            <Button
                Click="OnSettingsClick"
                Content="settings"
                Focusable="False"
                IsTabStop="False"
                />
            <Button
                Click="OnDonateClick"
                Content="donate"
                Focusable="False"
                IsTabStop="False"
                />
            <Button
                Click="OnHelpClick"
                Content="help"
                Focusable="False"
                IsTabStop="False"
                />
        </Controls:WindowCommands>
    </Controls:MetroWindow.RightWindowCommands>

    <!--  Settings Flyout  -->
    <Controls:MetroWindow.Flyouts>
        <Controls:FlyoutsControl Focusable="False" IsTabStop="False">
            <Controls:Flyout
                x:Name="SettingsFlyout"
                Width="500"
                AllowFocusElement="False"
                Focusable="False"
                Header="Settings"
                IsTabStop="False"
                Position="Right"
                Theme="Adapt"
                >

                <!--  Your custom content here  -->
                <ScrollViewer>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Separator Grid.ColumnSpan="3" />

                        <!--<Canvas Background="Red" />
                        <Canvas
                            Grid.Row="0"
                            Grid.Column="1"
                            Background="Green"
                            />
                        <Canvas Grid.Row="1" Background="Red" />
                        <Canvas
                            Grid.Row="1"
                            Grid.Column="2"
                            Background="Green"
                            />
                        <Canvas Grid.Row="2" Background="Red" />
                        <Canvas
                            Grid.Row="2"
                            Grid.Column="2"
                            Background="Green"
                            />
                        <Canvas Grid.Row="3" Background="Red" />
                        <Canvas
                            Grid.Row="3"
                            Grid.Column="2"
                            Background="Green"
                            />
                        <Canvas Grid.Row="4" Background="Red" />
                        <Canvas
                            Grid.Row="4"
                            Grid.Column="2"
                            Background="Green"
                            />
                        <Canvas Grid.Row="5" Background="Red" />
                        <Canvas
                            Grid.Row="5"
                            Grid.Column="2"
                            Background="Green"
                            />
                        <Canvas Grid.Row="6" Background="Azure" />
                        <Canvas
                            Grid.Row="6"
                            Grid.Column="2"
                            Background="Yellow"
                            />-->

                        <!--  Dark Mode Toggle  -->
                        <Controls:ToggleSwitch
                            Grid.Row="1"
                            Width="140"
                            Height="100"
                            Padding="20,40,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Focusable="False"
                            Header="Dark Mode"
                            IsChecked="{Binding Path=DarkModeToggle, Mode=TwoWay}"
                            IsTabStop="False"
                            />

                        <StackPanel
                            Grid.Row="1"
                            Grid.Column="1"
                            Height="60"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            >
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
                        </StackPanel>

                        <TextBlock
                            Grid.Row="1"
                            Grid.Column="2"
                            Width="330"
                            Height="60"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Text="Switch between Light and Dark theme."
                            TextWrapping="Wrap"
                            />

                        <!--  Theme Accent Dropdown  -->
                        <Controls:SplitButton
                            x:Name="ThemeAccentDrop"
                            Grid.Row="2"
                            Width="120"
                            Height="60"
                            Margin="20,40,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Click="OnAccentClick"
                            Focusable="False"
                            IsTabStop="False"
                            ItemsSource="{Binding Path=ThemeAccents, Mode=TwoWay}"
                            Orientation="Vertical"
                            SelectedIndex="{Binding Path=ThemeAccentDropIndex, Mode=TwoWay}"
                            />

                        <StackPanel
                            Grid.Row="2"
                            Grid.Column="1"
                            Height="60"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            >
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
                        </StackPanel>

                        <TextBlock
                            Grid.Row="2"
                            Grid.Column="2"
                            Width="330"
                            Height="60"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Text="Change the accent colors."
                            TextWrapping="Wrap"
                            />

                        <!--  Stretch Image Toggle  -->
                        <Controls:ToggleSwitch
                            Grid.Row="3"
                            Width="140"
                            Height="100"
                            Padding="20,40,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Focusable="False"
                            Header="Stretch Image"
                            IsChecked="{Binding Path=StretchImageToggle, Mode=TwoWay}"
                            IsTabStop="False"
                            />

                        <StackPanel
                            Grid.Row="3"
                            Grid.Column="1"
                            Height="60"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            >
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
                        </StackPanel>

                        <TextBlock
                            Grid.Row="3"
                            Grid.Column="2"
                            Width="330"
                            Height="60"
                            Margin="0"
                            Padding="0,0,20,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Text="Always stretch images to fit the window. Toggle shortcut: ''F''"
                            TextWrapping="Wrap"
                            />

                        <!--  Downsize Image  -->
                        <Controls:ToggleSwitch
                            Grid.Row="4"
                            Width="140"
                            Height="100"
                            Padding="20,40,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Focusable="False"
                            Header="Downsize Image"
                            IsChecked="{Binding Path=DownsizeImageToggle, Mode=TwoWay}"
                            IsTabStop="False"
                            />

                        <StackPanel
                            Grid.Row="4"
                            Grid.Column="1"
                            Height="60"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            >
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
                        </StackPanel>

                        <TextBlock
                            Grid.Row="4"
                            Grid.Column="2"
                            Width="330"
                            Height="60"
                            Margin="0"
                            Padding="0,0,20,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Text="Reduce image size to current window's. This reduces memory usage for images larger than screen's."
                            TextWrapping="Wrap"
                            />

                        <!--  Zoom Sensitivity  -->
                        <TextBlock
                            Grid.Row="5"
                            Width="140"
                            Margin="10,50,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Text="{Binding Path=ZoomSensitivityString, Mode=OneWay}"
                            TextAlignment="Center"
                            />
                        <Slider
                            Grid.Row="5"
                            Width="140"
                            Height="100"
                            Margin="5,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Focusable="False"
                            IsSnapToTickEnabled="True"
                            IsTabStop="False"
                            LargeChange="0.05"
                            Maximum="2"
                            Minimum="0.1"
                            TickFrequency="0.05"
                            Value="{Binding Path=ZoomSensitivity, Mode=TwoWay}"
                            />

                        <StackPanel
                            Grid.Row="5"
                            Grid.Column="1"
                            Height="60"
                            VerticalAlignment="Bottom"
                            Orientation="Horizontal"
                            >
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" />
                        </StackPanel>

                        <TextBlock
                            Grid.Row="5"
                            Grid.Column="2"
                            Width="330"
                            Height="60"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Bottom"
                            Text="Change the zoom in and out sensitivity of the image. (Default is 1.00)"
                            TextWrapping="Wrap"
                            />

                        <Separator Grid.Row="6" Grid.ColumnSpan="3" />

                    </Grid>
                </ScrollViewer>
            </Controls:Flyout>

            <!--  Help Flyout  -->
            <Controls:Flyout
                x:Name="HelpFlyout"
                Height="440"
                AllowFocusElement="False"
                Focusable="False"
                Header="Help"
                IsTabStop="False"
                Position="Top"
                Theme="Adapt"
                >

                <Image Source="Resources/kblayoutkeys.png" />
            </Controls:Flyout>
        </Controls:FlyoutsControl>
    </Controls:MetroWindow.Flyouts>

    <!--  Context Menu | Window  -->
    <Grid Margin="0,0,0,0" MouseDown="OnCloseFlyoutsClick">
        <Grid.ContextMenu>
            <ContextMenu>
                <MenuItem Click="OnOpenFileLocation" Header="Open File Location" />
                <Separator />
                <MenuItem Click="OnDeleteClick" Header="Delete" />
            </ContextMenu>
        </Grid.ContextMenu>

        <!--  Image Information  -->
        <Border
            Width="200"
            Height="40"
            Margin="2,2,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Focusable="False"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            >
            <TextBlock
                VerticalAlignment="Center"
                Focusable="False"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                Text="{Binding Path=ImgResolution, Mode=OneWay}"
                TextWrapping="Wrap"
                />
        </Border>

        <Button
            x:Name="Btn_Prev"
            Width="60"
            Height="40"
            Margin="0,2,80,0"
            Padding="0"
            VerticalAlignment="Top"
            Click="OnClick_Prev"
            Content="🡄"
            Focusable="False"
            FontSize="30"
            IsTabStop="False"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            />

        <Button
            x:Name="Btn_Next"
            Width="60"
            Height="40"
            Margin="80,2,0,0"
            Padding="0"
            VerticalAlignment="Top"
            Click="OnClick_Next"
            Content="🡆"
            Focusable="False"
            FontSize="30"
            IsTabStop="False"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            />

        <Button
            Width="75"
            Margin="0,10,10,0"
            Padding="0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Click="OnOpenBrowseImage"
            Content="Open"
            Focusable="False"
            IsTabStop="False"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            />

        <!--  MediaElement Control  -->
        <utils:ZoomBorder
            x:Name="border"
            Margin="0,44,0,0"
            Background="#FF2F3136"
            ClipToBounds="True"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            >
            <MediaElement
                Name="MediaView"
                LoadedBehavior="Manual"
                MediaEnded="OnClipEnded"
                MediaOpened="OnClipOpened"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                ScrubbingEnabled="True"
                Source="{Binding Path=MediaSource, Mode=TwoWay}"
                StretchDirection="DownOnly"
                UnloadedBehavior="Manual"
                />
        </utils:ZoomBorder>

        <!--  Image Control  -->
        <utils:ZoomBorder
            x:Name="borderImg"
            Margin="0,44,0,0"
            Background="#FF2F3136"
            ClipToBounds="True"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            >
            <Image
                Name="PictureView"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                Source="{Binding Path=ImageSource, Mode=TwoWay}"
                StretchDirection="DownOnly"
                />
        </utils:ZoomBorder>
    </Grid>
</Controls:MetroWindow>